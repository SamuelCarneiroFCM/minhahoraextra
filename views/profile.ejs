<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hora Extra</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <script type="text/javascript">
        $.mobile.ajaxEnabled=false;
        var centesimas = 0;
        var segundos = 0;
        var minutos = 0;
        var horas = 0;
        function inicio () {
        	control = setInterval(cronometro,10);
        	document.getElementById("inicio").disabled = true;
        	document.getElementById("parar").disabled = false;
        	document.getElementById("reinicio").disabled = false;
          document.getElementById("dialogo-pergunta").disabled = false;
        }
        function parar () {
        	clearInterval(control);
        	document.getElementById("parar").disabled = true;
        }
        function reinicio () {
        	clearInterval(control);
        	centesimas = 0;
        	segundos = 0;
        	minutos = 0;
        	horas = 0;
        	//Centesimas.innerHTML = ":00";
        	Segundos.innerHTML = ":00";
        	Minutos.innerHTML = ":00";
        	Horas.innerHTML = "00";
        	document.getElementById("inicio").disabled = false;
        	document.getElementById("parar").disabled = true;
        	document.getElementById("reinicio").disabled = true;
          document.getElementById("dialogo-pergunta").disabled = false;

        }
        function cronometro () {

        	if (centesimas < 99) {
        		centesimas++;
            /*
        		if (centesimas < 10) { centesimas = "0"+centesimas }
        		Centesimas.innerHTML = ":"+centesimas;
            */
        	}
        	if (centesimas == 99) {
        		centesimas = -1;
        	}
        	if (centesimas == 0) {
        		segundos ++;
        		if (segundos < 10) { segundos = "0"+segundos }
        		Segundos.innerHTML = ":"+segundos;
        	}
        	if (segundos == 59) {
        		segundos = -1;
        	}
        	if ( (centesimas == 0)&&(segundos == 0) ) {
        		minutos++;
        		if (minutos < 10) { minutos = "0"+minutos }
        		Minutos.innerHTML = ":"+minutos;
        	}
        	if (minutos == 59) {
        		minutos = -1;
        	}
        	if ( (centesimas == 0)&&(segundos == 0)&&(minutos == 0) ) {
        		horas ++;
        		if (horas < 10) { horas = "0"+horas }
        		Horas.innerHTML = horas;
        	}
        }
        var relogio = document.getElementById("relogio");

        function pegarhoraminutosegundo() {
          var tempo = document.getElementById("Horas").innerText +
            document.getElementById("Minutos").innerText +
            document.getElementById("Segundos").innerText;
          document.getElementById("tempo").value = tempo;
        }
    </script>
    <style>
        #relogio
        .reloj{
          float: left;
          font-size: 30px;
          font-family: Courier,sans-serif;
          color: #363431;
          }

        #combined-heading-and-section
         .custom-corners .ui-bar {
          -webkit-border-top-left-radius: inherit;
          border-top-left-radius: inherit;
          -webkit-border-top-right-radius: inherit;
          border-top-right-radius: inherit;
          }

        .custom-corners .ui-body {
          border-top-width: 0;
          -webkit-border-bottom-left-radius: inherit;
          border-bottom-left-radius: inherit;
          -webkit-border-bottom-right-radius: inherit;
          border-bottom-right-radius: inherit;
        }
        #cronometro
        .custom-corners .ui-bar {
          -webkit-border-top-left-radius: inherit;
          border-top-left-radius: inherit;
          -webkit-border-top-right-radius: inherit;
          border-top-right-radius: inherit;
        }
        .custom-corners .ui-body {
          border-top-width: 0;
          -webkit-border-bottom-left-radius: inherit;
          border-bottom-left-radius: inherit;
          -webkit-border-bottom-right-radius: inherit;
          border-bottom-right-radius: inherit;
        }

    </style>
</head>
<body>
  <div data-role="page" id="principal" data-title="Hora Extra">
      <div data-role="header" data-position="fixed">
         <h1>Hora Extra</h1>
         <a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
         <a href="/logout" class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-power"><%= user.nome %></a>
      </div>

      <section data-role="content">
        <div class="ui-corner-all custom-corners">
          <div class="ui-body ui-body-a">
        			<div data-role="tabs" id="tabs">
        		      <div data-role="navbar">
          			    <ul>
          			      <li><a href="#iniciarhora">Iniciar Hora</a></li>
          			      <li><a href="#add-hora-extra">Gráfico</a></li>
          			    </ul>
        		      </div>

                  <div id="iniciarhora" class="ui-body-d ui-content">
                    <div class="ui-corner-all custom-corners">
                      <div class="ui-bar ui-bar-a">
                          <fieldset>
                              <div id="relogio">
                                <div class="reloj" id="Horas">00</div>
                                <div class="reloj" id="Minutos">:00</div>
                                <div class="reloj" id="Segundos">:00</div>
                              </div>
                          </fieldset>
                          <div id="cronometro">
                            <div class="ui-body ui-body-a ui-corner-all">
                                <a id="inicio" onclick="inicio();" class="ui-btn ui-shadow">Iniciar &#9658;</a>
                                <a id="parar" onclick="parar();" class="ui-btn ui-shadow">Parar &#8718;</a>
                                <a id="reinicio" onclick="reinicio();" class="ui-btn ui-shadow">Resetar &#8635;</a>
                                <a id="dialogo-pergunta" href="#dialogo-pergunta" class="ui-btn ui-shadow" data-transition="slidedown" data-transition="pop">Gravar Hora</a>
                            </div>
                          </div>
                      </div>
                    </div>
        		      </div>
              </div>
          </div>
        </div>
      </section>
      <footer data-role="footer" data-position="fixed">
          <small class="ui-bar">Samuel Carneiro &#174</small>
      </footer>

      <div data-role="panel" data-position-fixed="true" data-display="push" data-theme="a" id="nav-panel">
      		<ul data-role="listview">
             <li data-icon="delete"><a href="#" data-rel="close">Fechar menu</a></li>
             <li><a href="#add-hora-extra">Adicionar</a></li>
      		</ul>
      </div>
  </div>

  <div data-role="page" id="add-hora-extra">
      <div data-role="header" data-position="fixed" data-title="Adicionar Hora Extra">
          <h1>Add Hora Extra</h1>
          <a href="#principal" data-ajax="false" data-rel="back" class="ui-btn ui-btn-left ui-alt-icon ui-nodisc-icon ui-corner-all ui-btn-icon-notext ui-icon-carat-l">Back</a>
      </div>

      <section data-role="content">
        <div class="ui-corner-all custom-corners">
          <div class="ui-body ui-body-a">
              <form action="/horastrabalhadas" method="post">
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" name="email-e" id="email-e" data-clear-btn="false" disabled="disabled" class="form-control" value="<%= user.email %>">
                    <input type="hidden" id="email" name="email" value="<%= user.email %>"/>
                </div>
                <div class="form-group">
                    <label>Solicitação:</label>
                    <input type="text" data-clear-btn="true" name="solicitacao" id="solicitacao" placeholder="ML-00001" value="">
                </div>
                <div class="form-group">
                    <label>Data de início:</label>
                    <input type="date" data-clear-btn="true" name="datainicial" id="datainicial" value="">
                </div>
                <div class="form-group">
                    <label>Hora de início:</label>
                    <input type="time" data-clear-btn="true" name="horainicial" id="horainicial" value="">
                </div>
                <div class="form-group">
                    <label>Data de final:</label>
                    <input type="date" data-clear-btn="true" name="datafinal" id="datafinal" value="">
                </div>
                <div class="form-group">
                    <label>Hora de final:</label>
                    <input type="time" data-clear-btn="true" name="horafinal" id="horafinal" value="">
                </div>
                <button href="#principal" type="submit" class="btn btn-primary">Adicionar</button>
              </form>
          </div>
        </div>
      </section>

      <footer data-role="footer" data-position="fixed">
          <small class="ui-bar">Samuel Carneiro &#174</small>
      </footer>
  </div>

  <div data-role="page" data-dialog="true" id="dialogo-pergunta">

		<div data-role="header" data-theme="b">
		<h1>Dialogo</h1>
		</div>

		<section data-role="content" class="ui-content">
      <form action="/horatrabalhadaatual" method="post">
		    <h1>Deseja gravar?</h1>
		    <p>A informação será salva no banco de hora</p>
        <br>
        <div class="form-group">
            <label>Solicitação:</label>
            <input type="text" data-clear-btn="true" name="solicitacao" id="solicitacao" placeholder="ML-00001" value="">
        </div>
        <input type="hidden" id="email" name="email" value="<%= user.email %>"/>
        <input type="hidden" id="tempo" name="tempo"/>
        <button type="submit" onclick="pegarhoraminutosegundo()" data-rel="back" class="btn-confimar ui-btn ui-shadow ui-corner-all ui-btn-a">Confimar</button>
			  <a href="/profile" data-rel="back" class="ui-btn ui-shadow ui-corner-all ui-btn-a">Cancelar</a>
      </from>
		</section>
  </div>
</body>
</html>
